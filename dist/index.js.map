{"version":3,"file":"index.js","sources":["../src/Layer.tsx","../src/Layers.tsx","../src/index.tsx"],"sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\n\ninterface Props {\n  index: number\n  transform: string\n  opacity: number\n  children: React.ReactNode\n  style?: React.CSSProperties\n}\n\nconst Layer = React.memo(({ index, opacity, transform, children }: Props) => {\n  return (\n    <StyledLayer\n      style={{\n        //@ts-expect-error\n        '--transform': transform,\n        '--opacity': opacity,\n        ...(index >= 1 && backLayersStyle)\n      }}\n    >\n      {children}\n    </StyledLayer>\n  )\n})\n\nconst backLayersStyle: React.CSSProperties = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  pointerEvents: 'none',\n  MozUserSelect: 'none',\n  msUserSelect: 'none',\n  WebkitUserSelect: 'none',\n  userSelect: 'none'\n}\n\nconst StyledLayer = styled.span`\n  display: inline-block;\n  opacity: var(--opacity);\n  transform: var(--transform);\n`\n\nexport default Layer\n","import React, { Fragment, useMemo } from 'react'\nimport Layer from './Layer'\n\ninterface Props {\n  layers: number\n  fade: boolean\n  children: React.ReactNode\n  direction: string\n  depth: string\n}\n\nconst Layers = React.memo(\n  ({ layers, fade, children, direction, depth }: Props) => {\n    const depthUnit = depth.match(/[a-z]+/)?.[0] ?? ''\n\n    const getDirection = React.useCallback(\n      (pct: number) => {\n        const depthNumeral = parseFloat(depth.replace(depthUnit, ''))\n        if (direction === 'backwards') {\n          return -pct * depthNumeral\n        }\n        if (direction === 'both') {\n          return -(pct * depthNumeral) + depthNumeral / 2\n        }\n        if (direction === 'forwards') {\n          return -(pct * depthNumeral) + depthNumeral\n        }\n        return null\n      },\n      [depthUnit]\n    )\n\n    const renderLayers = useMemo(\n      () =>\n        Array(layers)\n          .fill(0)\n          .map((_, i) => {\n            const pct = i / layers\n            const transform = `translateZ(${getDirection(pct)}${depthUnit})`\n            const opacity = fade ? (1 - pct) / 2 : 1\n            return (\n              <Layer key={i} index={i} opacity={opacity} transform={transform}>\n                {children}\n              </Layer>\n            )\n          }),\n      []\n    )\n    return <Fragment>{renderLayers}</Fragment>\n  }\n)\nexport default Layers\n","import React from 'react'\nimport styled from 'styled-components'\nimport Layers from './Layers'\n\ninterface Props {\n  depth: string\n  direction: string\n  event: string\n  eventRotation: string\n  eventDirection: string\n  fade: boolean\n  layers: number\n  perspective: string\n  children: React.ReactNode\n  style?: React.CSSProperties\n}\n\nconst Ztext: React.FC<Props> = (props) => {\n  const layersWrapperRef = React.useRef<HTMLSpanElement>(null)\n\n  const tilt = React.useCallback(\n    (xPct: number, yPct: number) => {\n      const eventRotationUnit = props.eventRotation?.match(/[a-z]+/)?.[0] ?? ''\n      const eventRotationNumeral = parseFloat(\n        props.eventRotation.replace(eventRotationUnit, '')\n      )\n      // Switch neg/pos values if eventDirection is reversed\n      let eventDirectionAdj = null\n      if (props.eventDirection === 'reverse') {\n        eventDirectionAdj = -1\n      } else {\n        eventDirectionAdj = 1\n      }\n\n      // Multiply pct rotation by eventRotation and eventDirection\n      const xTilt = xPct * eventRotationNumeral * eventDirectionAdj\n      const yTilt = -yPct * eventRotationNumeral * eventDirectionAdj\n\n      // Rotate .z-layers as a function of x and y coordinates\n      const transform = `rotateX(${yTilt}${eventRotationUnit}) rotateY(${xTilt}${eventRotationUnit})`\n\n      layersWrapperRef.current?.style.setProperty('--transform', transform)\n    },\n    [props.eventDirection]\n  )\n\n  React.useEffect(() => {\n    if (props.event === 'pointer') {\n      window.addEventListener(\n        'mousemove',\n        (e) => {\n          const xPct = (e.clientX / window.innerWidth - 0.5) * 2\n          const yPct = (e.clientY / window.innerHeight - 0.5) * 2\n\n          tilt(xPct, yPct)\n        },\n        false\n      )\n\n      window.addEventListener(\n        'touchmove',\n        (e) => {\n          const xPct = (e.touches[0].clientX / window.innerWidth - 0.5) * 2\n          const yPct = (e.touches[0].clientY / window.innerHeight - 0.5) * 2\n\n          tilt(xPct, yPct)\n        },\n        false\n      )\n    }\n  }, [props.event])\n\n  return (\n    <Wrapper\n      style={{\n        //@ts-expect-error\n        '--perspective': props.perspective,\n        ...props.style\n      }}\n    >\n      <LayersWrapper ref={layersWrapperRef}>\n        <Layers\n          layers={props.layers}\n          direction={props.direction}\n          depth={props.depth}\n          fade={props.fade}\n        >\n          {props.children}\n        </Layers>\n      </LayersWrapper>\n    </Wrapper>\n  )\n}\n\nZtext.defaultProps = {\n  depth: '1rem',\n  direction: 'both',\n  event: 'pointer',\n  eventRotation: '30deg',\n  eventDirection: 'default',\n  fade: false,\n  layers: 10,\n  perspective: '500px'\n}\n\nconst Wrapper = styled.div`\n  display: inline-block;\n  position: relative;\n  perspective: var(--perspective);\n`\n\nconst LayersWrapper = styled.span`\n  display: inline-block;\n  transform-style: preserve-3d;\n  transform: var(--transform);\n`\n\nexport default Ztext\n"],"names":["Layer","React","memo","index","opacity","transform","children","StyledLayer","style","backLayersStyle","position","top","left","pointerEvents","MozUserSelect","msUserSelect","WebkitUserSelect","userSelect","styled","span","Layers","layers","fade","direction","depth","depthUnit","match","getDirection","useCallback","pct","depthNumeral","parseFloat","replace","renderLayers","useMemo","Array","fill","map","_","i","key","Fragment","Ztext","props","layersWrapperRef","useRef","tilt","xPct","yPct","eventRotationUnit","eventRotation","eventRotationNumeral","eventDirectionAdj","eventDirection","xTilt","yTilt","current","setProperty","useEffect","event","window","addEventListener","e","clientX","innerWidth","clientY","innerHeight","touches","Wrapper","perspective","LayersWrapper","ref","defaultProps","div"],"mappings":"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"}